<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Elisp notes</title>
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" href="https://cdn.simplecss.org/simple.min.css" />
</head>
<body>
<div id="content" class="content">
<h1 class="title">Elisp notes</h1>
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#org3db99c7">Functions</a></li>
<li><a href="#orgca08786">Types</a></li>
<li><a href="#org8d4bb0d">Quote</a></li>
<li><a href="#org8496be6">Quasiquote</a></li>
<li><a href="#org51598d2">Interactive functions</a></li>
<li><a href="#org79447e4">Key bindings</a></li>
<li><a href="#org70c97ba">Conditions statements</a>
<ul>
<li><a href="#orgc39da42">if</a></li>
<li><a href="#orgc9a72fa">when, unless</a></li>
<li><a href="#org51e1bb2">and, or, not</a></li>
<li><a href="#orgcce2e07">progn</a></li>
</ul>
</li>
<li><a href="#org6fc25a6">Vars</a></li>
<li><a href="#org8d35946">Lists</a></li>
<li><a href="#orgef8dd25">Iterations</a>
<ul>
<li><a href="#orgf1e6540">cl-loop</a></li>
<li><a href="#orge6141e3">while</a></li>
<li><a href="#orgab1b345">dolist</a></li>
</ul>
</li>
<li><a href="#org0a46adc">Hooks</a></li>
<li><a href="#org6ff5e27">Temp vars</a></li>
<li><a href="#org36e7f2d">Links</a></li>
</ul>
</div>
</div>

<div id="outline-container-org3db99c7" class="outline-2">
<h2 id="org3db99c7">Functions</h2>
<div class="outline-text-2" id="text-org3db99c7">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">bz/add</span> (num)
  (+ num 1))

(bz/add 2)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgca08786" class="outline-2">
<h2 id="orgca08786">Types</h2>
<div class="outline-text-2" id="text-orgca08786">
<dl class="org-dl">
<dt>numbers</dt><dd>1</dd>
<dt>strings</dt><dd>"Hi"</dd>
<dt>symbols</dt><dd>'hello</dd>
<dt>chars</dt><dd>?h</dd>
<dt>true</dt><dd>t</dd>
<dt>false</dt><dd>nil</dd>
<dt>pairs</dt><dd>(cons 1 2)</dd>
<dt>lists</dt><dd>(list 1 2 3)</dd>
</dl>

<p>
Can be evaluated with C-x C-e
</p>
</div>
</div>

<div id="outline-container-org8d4bb0d" class="outline-2">
<h2 id="org8d4bb0d">Quote</h2>
<div class="outline-text-2" id="text-org8d4bb0d">
<p>
Tells not to evaluate the expression.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">'(+ 1 2)
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">'i-am-not-a-expression-just-a-symbol
</pre>
</div>
</div>
</div>

<div id="outline-container-org8496be6" class="outline-2">
<h2 id="org8496be6">Quasiquote</h2>
<div class="outline-text-2" id="text-org8496be6">
<p>
Allows to unquote and expression.
Comma means "to unquote".
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">`(1 2 ,(+ 1 2))
</pre>
</div>
</div>
</div>

<div id="outline-container-org51598d2" class="outline-2">
<h2 id="org51598d2">Interactive functions</h2>
<div class="outline-text-2" id="text-org51598d2">
<p>
Can be used as a command in emacs through M-x.
<code>(interactive)</code> should be used inside a function.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">insert-numbers</span> ()
  <span style="font-style: italic;">"insert a sequence of numbers"</span> <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">docstring</span>
  (<span style="font-weight: bold;">interactive</span>)
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(insert "1 2 3"))</span>
  (message <span style="font-style: italic;">"1 2 3"</span>))
</pre>
</div>
</div>
</div>

<div id="outline-container-org79447e4" class="outline-2">
<h2 id="org79447e4">Key bindings</h2>
<div class="outline-text-2" id="text-org79447e4">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(global-set-key (kbd <span style="font-style: italic;">"C-S-s"</span>) 'insert-numbers
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(keymap-global-set <span style="font-style: italic;">"C-S-s"</span> 'insert-numbers) <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">for newer emacs versions</span>
</pre>
</div>

<p>
If there is no need to set it globally, it can be done for a specific mode using <code>keymap-set</code>.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">c--insert-if</span> ()
  (<span style="font-weight: bold;">interactive</span>)
  (insert <span style="font-style: italic;">"if () {\n}"</span>))
(keymap-set c-mode-map <span style="font-style: italic;">"C-S-s"</span>, 'c--insert-if)
</pre>
</div>
</div>
</div>

<div id="outline-container-org70c97ba" class="outline-2">
<h2 id="org70c97ba">Conditions statements</h2>
<div class="outline-text-2" id="text-org70c97ba">
</div>
<div id="outline-container-orgc39da42" class="outline-3">
<h3 id="orgc39da42">if</h3>
<div class="outline-text-3" id="text-orgc39da42">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">if</span> t
    'it-was-true 'it-was-false)
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">if</span> nil
    'it-was-true 'it-was-false)
</pre>
</div>

<p>
Anything but <code>nil</code> is true
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">if</span> 'anything
    'it-was-true 'it-was-false)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc9a72fa" class="outline-3">
<h3 id="orgc9a72fa">when, unless</h3>
<div class="outline-text-3" id="text-orgc9a72fa">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">when</span> t 'this-is-true)
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">unless</span> nil 'this-is-false)
</pre>
</div>
</div>
</div>

<div id="outline-container-org51e1bb2" class="outline-3">
<h3 id="org51e1bb2">and, or, not</h3>
<div class="outline-text-3" id="text-org51e1bb2">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">and</span> t nil)
(<span style="font-weight: bold;">or</span> t nil)
(not t)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgcce2e07" class="outline-3">
<h3 id="orgcce2e07">progn</h3>
<div class="outline-text-3" id="text-orgcce2e07">
<p>
In Elisp the last expression to be evaluated is returned.
This can be a problem if we need to perform a bunch of operations in an if statement.
Solved with <code>progn</code>
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">if</span> t
    (<span style="font-weight: bold;">progn</span>
      (message <span style="font-style: italic;">"print text and"</span>)
      'do-something-else)
  'this-is-false)
</pre>
</div>

<p>
<code>progn</code> evals everything and returns the last one.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">progn</span> 1 2 3)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org6fc25a6" class="outline-2">
<h2 id="org6fc25a6">Vars</h2>
<div class="outline-text-2" id="text-org6fc25a6">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> some-existing-var t)
(<span style="font-weight: bold;">defvar</span> <span style="font-weight: bold; font-style: italic;">new-var</span> <span style="font-style: italic;">"something"</span>)
</pre>
</div>
</div>
</div>

<div id="outline-container-org8d35946" class="outline-2">
<h2 id="org8d35946">Lists</h2>
<div class="outline-text-2" id="text-org8d35946">
<p>
The list is a chain of cons cell types (pairs).
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(cons 1 (cons 2 nil))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgef8dd25" class="outline-2">
<h2 id="orgef8dd25">Iterations</h2>
<div class="outline-text-2" id="text-orgef8dd25">
</div>
<div id="outline-container-orgf1e6540" class="outline-3">
<h3 id="orgf1e6540">cl-loop</h3>
<div class="outline-text-3" id="text-orgf1e6540">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">cl-loop</span> for i from 0 to 10
         collect (* i i))
</pre>
</div>
</div>
</div>

<div id="outline-container-orge6141e3" class="outline-3">
<h3 id="orge6141e3">while</h3>
<div class="outline-text-3" id="text-orge6141e3">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> my/val 0)
(<span style="font-weight: bold;">setq</span> my/truth t)
(<span style="font-weight: bold;">while</span> my/truth
  (<span style="font-weight: bold;">if</span> (= my/val 10)
      (<span style="font-weight: bold;">setq</span> my/truth nil))
  (message <span style="font-style: italic;">"%s"</span> (<span style="font-weight: bold;">setq</span> my/val (1+ my/val))))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgab1b345" class="outline-3">
<h3 id="orgab1b345">dolist</h3>
<div class="outline-text-3" id="text-orgab1b345">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> total 0)
(<span style="font-weight: bold;">dolist</span> (i '(1 2 3)) <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">for i in '(1 2 3)</span>
  (<span style="font-weight: bold;">setq</span> total (+ total i)))
total
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org0a46adc" class="outline-2">
<h2 id="org0a46adc">Hooks</h2>
<div class="outline-text-2" id="text-org0a46adc">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">my-func</span>()
  (<span style="font-weight: bold;">interactive</span>)
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">do something</span>
  (run-hook 'my-func-hook))

(add-hook 'my-func-hook (<span style="font-weight: bold;">lambda</span> () (insert <span style="font-style: italic;">"1"</span>)))
(add-hook 'my-func-hook (<span style="font-weight: bold;">lambda</span> () (insert <span style="font-style: italic;">"2"</span>)))
</pre>
</div>
</div>
</div>

<div id="outline-container-org6ff5e27" class="outline-2">
<h2 id="org6ff5e27">Temp vars</h2>
<div class="outline-text-2" id="text-org6ff5e27">
<p>
Use <code>let</code> if you want to have function local vars.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">my-func</span> ()
  (<span style="font-weight: bold;">let</span> (
        (four (+ 2 2))
        (five 5)
        )
    (- four five)))
(my-func)
</pre>
</div>
</div>
</div>

<div id="outline-container-org36e7f2d" class="outline-2">
<h2 id="org36e7f2d">Links</h2>
<div class="outline-text-2" id="text-org36e7f2d">
<ul class="org-ul">
<li><a href="https://www.youtube.com/watch?v=1y__2IK-aLM">https://www.youtube.com/watch?v=1y__2IK-aLM</a></li>
</ul>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="creator"><a href="https://www.gnu.org/software/emacs/">Emacs</a> 29.3 (<a href="https://orgmode.org">Org</a> mode 9.6.15)</p>
</div>
</body>
</html>
