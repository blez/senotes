<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Elisp notes</title>
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" href="https://cdn.simplecss.org/simple.min.css" />
</head>
<body>
<div id="content" class="content">
<h1 class="title">Elisp notes</h1>
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#org22b1eeb">Functions</a></li>
<li><a href="#org3143b81">Types</a></li>
<li><a href="#orgdf0f395">Quote</a></li>
<li><a href="#orgfcd24a0">Quasiquote</a></li>
<li><a href="#orgdb9a709">Interactive functions</a></li>
<li><a href="#org539d6ab">Key bindings</a></li>
<li><a href="#org60a5924">Conditions statements</a>
<ul>
<li><a href="#orge82e056">if</a></li>
<li><a href="#org5e362e9">when, unless</a></li>
<li><a href="#org7c11e8a">and, or, not</a></li>
<li><a href="#org5fd37d7">progn</a></li>
</ul>
</li>
<li><a href="#orgd5f96c0">Vars</a></li>
<li><a href="#org7074787">Lists</a></li>
<li><a href="#org29ee5ce">Iterations</a>
<ul>
<li><a href="#org0fac15a">cl-loop</a></li>
<li><a href="#org075d053">while</a></li>
<li><a href="#org3b9a979">dolist</a></li>
</ul>
</li>
<li><a href="#orgace52b1">Hooks</a></li>
<li><a href="#orgaa50287">Temp vars</a></li>
<li><a href="#org4775a84">Links</a></li>
</ul>
</div>
</div>

<div id="outline-container-org22b1eeb" class="outline-2">
<h2 id="org22b1eeb">Functions</h2>
<div class="outline-text-2" id="text-org22b1eeb">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">bz/add</span> (num)
  (+ num 1))

(bz/add 2)
</pre>
</div>
</div>
</div>

<div id="outline-container-org3143b81" class="outline-2">
<h2 id="org3143b81">Types</h2>
<div class="outline-text-2" id="text-org3143b81">
<ul class="org-ul">
<li>numbers  1</li>
<li>strings  "Hi"</li>
<li>symbols  'hello</li>
<li>chars ?h</li>
<li>true t</li>
<li>false nil</li>
<li>pairs (cons 1 2)</li>
<li>lists (list 1 2 3)</li>
</ul>

<p>
Can be evaluated with C-x C-e
</p>
</div>
</div>

<div id="outline-container-orgdf0f395" class="outline-2">
<h2 id="orgdf0f395">Quote</h2>
<div class="outline-text-2" id="text-orgdf0f395">
<p>
Tells not to evaluate the expression.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">'(+ 1 2)
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">'i-am-not-a-expression-just-a-symbol
</pre>
</div>
</div>
</div>

<div id="outline-container-orgfcd24a0" class="outline-2">
<h2 id="orgfcd24a0">Quasiquote</h2>
<div class="outline-text-2" id="text-orgfcd24a0">
<p>
Allows to unquote and expression.
Comma means "to unquote".
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">`(1 2 ,(+ 1 2))
</pre>
</div>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />
</colgroup>
<tbody>
<tr>
<td class="org-right">1</td>
<td class="org-right">2</td>
<td class="org-right">3</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-orgdb9a709" class="outline-2">
<h2 id="orgdb9a709">Interactive functions</h2>
<div class="outline-text-2" id="text-orgdb9a709">
<p>
Can be used as a command in emacs through M-x.
<code>(interactive)</code> should be used inside a function.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">insert-numbers</span> ()
  <span style="font-style: italic;">"insert a sequence of numbers"</span> <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">docstring</span>
  (<span style="font-weight: bold;">interactive</span>)
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(insert "1 2 3"))</span>
  (message <span style="font-style: italic;">"1 2 3"</span>))
</pre>
</div>
</div>
</div>

<div id="outline-container-org539d6ab" class="outline-2">
<h2 id="org539d6ab">Key bindings</h2>
<div class="outline-text-2" id="text-org539d6ab">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(global-set-key (kbd <span style="font-style: italic;">"C-S-s"</span>) 'insert-numbers
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(keymap-global-set <span style="font-style: italic;">"C-S-s"</span> 'insert-numbers) <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">for newer emacs versions</span>
</pre>
</div>

<p>
If there is no need to set it globally, it can be done for a specific mode using <code>keymap-set</code>.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">c--insert-if</span> ()
  (<span style="font-weight: bold;">interactive</span>)
  (insert <span style="font-style: italic;">"if () {\n}"</span>))
(keymap-set c-mode-map <span style="font-style: italic;">"C-S-s"</span>, 'c--insert-if)
</pre>
</div>
</div>
</div>

<div id="outline-container-org60a5924" class="outline-2">
<h2 id="org60a5924">Conditions statements</h2>
<div class="outline-text-2" id="text-org60a5924">
</div>
<div id="outline-container-orge82e056" class="outline-3">
<h3 id="orge82e056">if</h3>
<div class="outline-text-3" id="text-orge82e056">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">if</span> t
    'it-was-true 'it-was-false)
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">if</span> nil
    'it-was-true 'it-was-false)
</pre>
</div>

<p>
Anything but <code>nil</code> is true
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">if</span> 'anything
    'it-was-true 'it-was-false)
</pre>
</div>
</div>
</div>

<div id="outline-container-org5e362e9" class="outline-3">
<h3 id="org5e362e9">when, unless</h3>
<div class="outline-text-3" id="text-org5e362e9">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">when</span> t 'this-is-true)
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">unless</span> nil 'this-is-false)
</pre>
</div>
</div>
</div>

<div id="outline-container-org7c11e8a" class="outline-3">
<h3 id="org7c11e8a">and, or, not</h3>
<div class="outline-text-3" id="text-org7c11e8a">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">and</span> t nil)
(<span style="font-weight: bold;">or</span> t nil)
(not t)
</pre>
</div>
</div>
</div>

<div id="outline-container-org5fd37d7" class="outline-3">
<h3 id="org5fd37d7">progn</h3>
<div class="outline-text-3" id="text-org5fd37d7">
<p>
In Elisp the last expression to be evaluated is returned.
This can be a problem if we need to perform a bunch of operations in an if statement.
Solved with <code>progn</code>
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">if</span> t
    (<span style="font-weight: bold;">progn</span>
      (message <span style="font-style: italic;">"print text and"</span>)
      'do-something-else)
  'this-is-false)
</pre>
</div>

<p>
<code>progn</code> evals everything and returns the last one.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">progn</span> 1 2 3)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgd5f96c0" class="outline-2">
<h2 id="orgd5f96c0">Vars</h2>
<div class="outline-text-2" id="text-orgd5f96c0">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> some-existing-var t)
(<span style="font-weight: bold;">defvar</span> <span style="font-weight: bold; font-style: italic;">new-var</span> <span style="font-style: italic;">"something"</span>)
</pre>
</div>
</div>
</div>

<div id="outline-container-org7074787" class="outline-2">
<h2 id="org7074787">Lists</h2>
<div class="outline-text-2" id="text-org7074787">
<p>
The list is a chain of cons cell types (pairs).
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(cons 1 (cons 2 nil))
</pre>
</div>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-right" />

<col  class="org-right" />
</colgroup>
<tbody>
<tr>
<td class="org-right">1</td>
<td class="org-right">2</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-org29ee5ce" class="outline-2">
<h2 id="org29ee5ce">Iterations</h2>
<div class="outline-text-2" id="text-org29ee5ce">
</div>
<div id="outline-container-org0fac15a" class="outline-3">
<h3 id="org0fac15a">cl-loop</h3>
<div class="outline-text-3" id="text-org0fac15a">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">cl-loop</span> for i from 0 to 10
         collect (* i i))
</pre>
</div>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />
</colgroup>
<tbody>
<tr>
<td class="org-right">0</td>
<td class="org-right">1</td>
<td class="org-right">4</td>
<td class="org-right">9</td>
<td class="org-right">16</td>
<td class="org-right">25</td>
<td class="org-right">36</td>
<td class="org-right">49</td>
<td class="org-right">64</td>
<td class="org-right">81</td>
<td class="org-right">100</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-org075d053" class="outline-3">
<h3 id="org075d053">while</h3>
<div class="outline-text-3" id="text-org075d053">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> my/val 0)
(<span style="font-weight: bold;">setq</span> my/truth t)
(<span style="font-weight: bold;">while</span> my/truth
  (<span style="font-weight: bold;">if</span> (= my/val 10)
      (<span style="font-weight: bold;">setq</span> my/truth nil))
  (message <span style="font-style: italic;">"%s"</span> (<span style="font-weight: bold;">setq</span> my/val (1+ my/val))))
</pre>
</div>
</div>
</div>

<div id="outline-container-org3b9a979" class="outline-3">
<h3 id="org3b9a979">dolist</h3>
<div class="outline-text-3" id="text-org3b9a979">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> total 0)
(<span style="font-weight: bold;">dolist</span> (i '(1 2 3)) <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">for i in '(1 2 3)</span>
  (<span style="font-weight: bold;">setq</span> total (+ total i)))
total
</pre>
</div>

<pre class="example">
6
</pre>
</div>
</div>
</div>

<div id="outline-container-orgace52b1" class="outline-2">
<h2 id="orgace52b1">Hooks</h2>
<div class="outline-text-2" id="text-orgace52b1">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">my-func</span>()
  (<span style="font-weight: bold;">interactive</span>)
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">do something</span>
  (run-hook 'my-func-hook))

(add-hook 'my-func-hook (<span style="font-weight: bold;">lambda</span> () (insert <span style="font-style: italic;">"1"</span>)))
(add-hook 'my-func-hook (<span style="font-weight: bold;">lambda</span> () (insert <span style="font-style: italic;">"2"</span>)))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgaa50287" class="outline-2">
<h2 id="orgaa50287">Temp vars</h2>
<div class="outline-text-2" id="text-orgaa50287">
<p>
Use <code>let</code> if you want to have function local vars.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">my-func</span> ()
  (<span style="font-weight: bold;">let</span> (
        (four (+ 2 2))
        (five 5)
        )
    (- four five)))
(my-func)
</pre>
</div>

<pre class="example">
-1
</pre>
</div>
</div>

<div id="outline-container-org4775a84" class="outline-2">
<h2 id="org4775a84">Links</h2>
<div class="outline-text-2" id="text-org4775a84">
<ul class="org-ul">
<li><a href="https://www.youtube.com/watch?v=1y__2IK-aLM">https://www.youtube.com/watch?v=1y__2IK-aLM</a></li>
</ul>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="creator"><a href="https://www.gnu.org/software/emacs/">Emacs</a> 29.3 (<a href="https://orgmode.org">Org</a> mode 9.6.15)</p>
</div>
</body>
</html>
